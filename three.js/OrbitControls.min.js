THREE.OrbitControls=function(e,t){function n(){return 2*Math.PI/60/60*V.autoRotateSpeed}function o(){return Math.pow(.95,V.zoomSpeed)}function a(e){K.theta-=e}function i(e){K.phi-=e}function r(e){V.object.isPerspectiveCamera?_/=e:V.object.isOrthographicCamera?(V.object.zoom=Math.max(V.minZoom,Math.min(V.maxZoom,V.object.zoom*e)),V.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),V.enableZoom=!1)}function s(e){V.object.isPerspectiveCamera?_*=e:V.object.isOrthographicCamera?(V.object.zoom=Math.max(V.minZoom,Math.min(V.maxZoom,V.object.zoom/e)),V.object.updateProjectionMatrix(),G=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),V.enableZoom=!1)}function c(e){W.set(e.clientX,e.clientY)}function m(e){te.set(e.clientX,e.clientY)}function l(e){J.set(e.clientX,e.clientY)}function u(e){q.set(e.clientX,e.clientY),Q.subVectors(q,W).multiplyScalar(V.rotateSpeed);var t=V.domElement===document?V.domElement.body:V.domElement;a(2*Math.PI*Q.x/t.clientWidth),i(2*Math.PI*Q.y/t.clientHeight),W.copy(q),V.update()}function d(e){ne.set(e.clientX,e.clientY),oe.subVectors(ne,te),oe.y>0?r(o()):oe.y<0&&s(o()),te.copy(ne),V.update()}function p(e){$.set(e.clientX,e.clientY),ee.subVectors($,J).multiplyScalar(V.panSpeed),re(ee.x,ee.y),J.copy($),V.update()}function h(e){}function E(e){e.deltaY<0?s(o()):e.deltaY>0&&r(o()),V.update()}function b(e){switch(e.keyCode){case V.keys.UP:re(0,V.keyPanSpeed),V.update();break;case V.keys.BOTTOM:re(0,-V.keyPanSpeed),V.update();break;case V.keys.LEFT:re(V.keyPanSpeed,0),V.update();break;case V.keys.RIGHT:re(-V.keyPanSpeed,0),V.update()}}function g(e){W.set(e.touches[0].pageX,e.touches[0].pageY)}function f(e){if(V.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);te.set(0,o)}if(V.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);J.set(a,i)}}function T(e){q.set(e.touches[0].pageX,e.touches[0].pageY),Q.subVectors(q,W).multiplyScalar(V.rotateSpeed);var t=V.domElement===document?V.domElement.body:V.domElement;a(2*Math.PI*Q.x/t.clientWidth),i(2*Math.PI*Q.y/t.clientHeight),W.copy(q),V.update()}function v(e){if(V.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,o=Math.sqrt(t*t+n*n);ne.set(0,o),oe.set(0,Math.pow(ne.y/te.y,V.zoomSpeed)),r(oe.y),te.copy(ne)}if(V.enablePan){var a=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);$.set(a,i),ee.subVectors($,J).multiplyScalar(V.panSpeed),re(ee.x,ee.y),J.copy($)}V.update()}function R(e){}function y(e){if(!1!==V.enabled){switch(e.preventDefault(),e.button){case V.mouseButtons.ORBIT:if(!1===V.enableRotate)return;c(e),F=z.ROTATE;break;case V.mouseButtons.ZOOM:if(!1===V.enableZoom)return;m(e),F=z.DOLLY;break;case V.mouseButtons.PAN:if(!1===V.enablePan)return;l(e),F=z.PAN}F!==z.NONE&&(document.addEventListener("mousemove",O,!1),document.addEventListener("mouseup",w,!1),V.dispatchEvent(U))}}function O(e){if(!1!==V.enabled)switch(e.preventDefault(),F){case z.ROTATE:if(!1===V.enableRotate)return;u(e);break;case z.DOLLY:if(!1===V.enableZoom)return;d(e);break;case z.PAN:if(!1===V.enablePan)return;p(e)}}function w(e){!1!==V.enabled&&(h(e),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",w,!1),V.dispatchEvent(Y),F=z.NONE)}function H(e){!1===V.enabled||!1===V.enableZoom||F!==z.NONE&&F!==z.ROTATE||(e.preventDefault(),e.stopPropagation(),V.dispatchEvent(U),E(e),V.dispatchEvent(Y))}function P(e){!1!==V.enabled&&!1!==V.enableKeys&&!1!==V.enablePan&&b(e)}function j(e){if(!1!==V.enabled){switch(e.preventDefault(),e.touches.length){case 1:if(!1===V.enableRotate)return;g(e),F=z.TOUCH_ROTATE;break;case 2:if(!1===V.enableZoom&&!1===V.enablePan)return;f(e),F=z.TOUCH_DOLLY_PAN;break;default:F=z.NONE}F!==z.NONE&&V.dispatchEvent(U)}}function M(e){if(!1!==V.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(!1===V.enableRotate)return;if(F!==z.TOUCH_ROTATE)return;T(e);break;case 2:if(!1===V.enableZoom&&!1===V.enablePan)return;if(F!==z.TOUCH_DOLLY_PAN)return;v(e);break;default:F=z.NONE}}function C(e){!1!==V.enabled&&(R(e),V.dispatchEvent(Y),F=z.NONE)}function L(e){!1!==V.enabled&&e.preventDefault()}var N,A,S,x,k;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return X.phi},this.getAzimuthalAngle=function(){return X.theta},this.saveState=function(){V.target0.copy(V.target),V.position0.copy(V.object.position),V.zoom0=V.object.zoom},this.reset=function(){V.target.copy(V.target0),V.object.position.copy(V.position0),V.object.zoom=V.zoom0,V.object.updateProjectionMatrix(),V.dispatchEvent(Z),V.update(),F=z.NONE},this.update=(N=new THREE.Vector3,A=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),S=A.clone().inverse(),x=new THREE.Vector3,k=new THREE.Quaternion,function(){var e=V.object.position;return N.copy(e).sub(V.target),N.applyQuaternion(A),X.setFromVector3(N),V.autoRotate&&F===z.NONE&&a(n()),X.theta+=K.theta,X.phi+=K.phi,X.theta=Math.max(V.minAzimuthAngle,Math.min(V.maxAzimuthAngle,X.theta)),X.phi=Math.max(V.minPolarAngle,Math.min(V.maxPolarAngle,X.phi)),X.makeSafe(),X.radius*=_,X.radius=Math.max(V.minDistance,Math.min(V.maxDistance,X.radius)),V.target.add(B),N.setFromSpherical(X),N.applyQuaternion(S),e.copy(V.target).add(N),V.object.lookAt(V.target),!0===V.enableDamping?(K.theta*=1-V.dampingFactor,K.phi*=1-V.dampingFactor,B.multiplyScalar(1-V.dampingFactor)):(K.set(0,0,0),B.set(0,0,0)),_=1,!!(G||x.distanceToSquared(V.object.position)>I||8*(1-k.dot(V.object.quaternion))>I)&&(V.dispatchEvent(Z),x.copy(V.object.position),k.copy(V.object.quaternion),G=!1,!0)}),this.dispose=function(){V.domElement.removeEventListener("contextmenu",L,!1),V.domElement.removeEventListener("mousedown",y,!1),V.domElement.removeEventListener("wheel",H,!1),V.domElement.removeEventListener("touchstart",j,!1),V.domElement.removeEventListener("touchend",C,!1),V.domElement.removeEventListener("touchmove",M,!1),document.removeEventListener("mousemove",O,!1),document.removeEventListener("mouseup",w,!1),window.removeEventListener("keydown",P,!1)};var D,V=this,Z={type:"change"},U={type:"start"},Y={type:"end"},z={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},F=z.NONE,I=1e-6,X=new THREE.Spherical,K=new THREE.Spherical,_=1,B=new THREE.Vector3,G=!1,W=new THREE.Vector2,q=new THREE.Vector2,Q=new THREE.Vector2,J=new THREE.Vector2,$=new THREE.Vector2,ee=new THREE.Vector2,te=new THREE.Vector2,ne=new THREE.Vector2,oe=new THREE.Vector2,ae=(D=new THREE.Vector3,function(e,t){D.setFromMatrixColumn(t,0),D.multiplyScalar(-e),B.add(D)}),ie=function(){var e=new THREE.Vector3;return function(t,n){!0===V.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(V.object.up,e)),e.multiplyScalar(t),B.add(e)}}(),re=function(){var e=new THREE.Vector3;return function(t,n){var o=V.domElement===document?V.domElement.body:V.domElement;if(V.object.isPerspectiveCamera){var a=V.object.position;e.copy(a).sub(V.target);var i=e.length();i*=Math.tan(V.object.fov/2*Math.PI/180),ae(2*t*i/o.clientHeight,V.object.matrix),ie(2*n*i/o.clientHeight,V.object.matrix)}else V.object.isOrthographicCamera?(ae(t*(V.object.right-V.object.left)/V.object.zoom/o.clientWidth,V.object.matrix),ie(n*(V.object.top-V.object.bottom)/V.object.zoom/o.clientHeight,V.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),V.enablePan=!1)}}();V.domElement.addEventListener("contextmenu",L,!1),V.domElement.addEventListener("mousedown",y,!1),V.domElement.addEventListener("wheel",H,!1),V.domElement.addEventListener("touchstart",j,!1),V.domElement.addEventListener("touchend",C,!1),V.domElement.addEventListener("touchmove",M,!1),window.addEventListener("keydown",P,!1),this.update()},THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});